<article class="test-compact" aria-labelledby="testTitle">
  <h2 id="testTitle">Test końcowy — sprawdź swoją wiedzę</h2>
  <p>Masz maksymalnie 60 minut na rozwiązanie testu. Jeśli zaznaczysz poniżej, że jesteś osobą z niepełnosprawnością, czas wydłuży się do 90 minut. Możesz jednorazowo wstrzymać licznik na 10 minut przyciskiem „Pauza” w pasku kursu. Przycisk „Stop” kończy próbę i liczy się jako zużyta.</p>

  <div class="card" id="a11yPanel" style="display:flex;gap:8px;align-items:center;flex-wrap:wrap" role="region" aria-label="Ustawienia dostępności">
    <label style="display:flex;align-items:center;gap:8px"><input type="checkbox" id="a11yMode"> Jestem osobą z niepełnosprawnością (czas testu 90 minut)</label>
    <button class="btn" id="voiceToggle" aria-pressed="false" aria-label="Włącz odpowiedzi głosem">Włącz odpowiedzi głosem</button>
    <span id="voiceStatus" aria-live="polite" style="color:#666"></span>
  </div>

  <!-- Pasek: czas + próby -->
  <div class="card" id="testBar" style="display:flex;align-items:center;gap:10px;flex-wrap:wrap" role="region" aria-label="Pasek stanu testu">
    <div style="display:flex;align-items:center;gap:8px">
      <svg width="44" height="44" viewBox="0 0 36 36" aria-hidden="true">
        <circle cx="18" cy="18" r="16" fill="none" stroke="#e6e6f5" stroke-width="4"></circle>
        <circle id="ring" cx="18" cy="18" r="16" fill="none" stroke="#667eea" stroke-width="4" stroke-linecap="round" stroke-dasharray="100 100" transform="rotate(-90 18 18)"></circle>
      </svg>
      <div>
        <div style="font-weight:700">Pozostały czas: <span id="time" aria-live="polite">60:00</span></div>
        <div id="pauseInfo" style="color:#666;font-size:12px;display:none">Wstrzymano: <span id="pauseLeft">10:00</span></div>
      </div>
    </div>
    <div style="margin-left:auto;font-size:14px">
      <strong>Pozostałe próby: <span id="attemptsLeft">3</span>/3</strong>
    </div>
  </div>

  <div id="startPanel" class="card" style="margin-top:8px" role="region" aria-label="Start testu">
    <p style="margin:0 0 6px">Aby rozpocząć odliczanie, kliknij przycisk poniżej. Licznik prób uruchamia się w momencie startu.</p>
    <div class="controls">
      <button class="btn primary" id="startTest" aria-label="Rozpocznij test">Rozpocznij test</button>
    </div>
    <div id="lockMsg" class="callout" style="display:none;margin-top:6px" aria-live="polite"></div>
  </div>

  <div id="quizWrap" style="display:none">
    <form id="quiz" aria-label="Pytania testowe"></form>

    <div class="controls" style="margin-top:8px;gap:6px">
      <button class="btn" id="playCurrent" aria-label="Odsłuchaj aktualne pytanie">Odsłuchaj pytanie</button>
      <button class="btn primary" id="check" aria-label="Sprawdź wynik">Sprawdź wynik</button>
      <button class="btn" id="retry" aria-label="Powtórz test">Powtórz test</button>
    </div>

    <div id="result" class="card" style="margin-top:10px; display:none" aria-live="polite"></div>
  </div>

  <style>
    /* Kompaktowy układ testu */
    .test-compact .card{ padding:10px 12px; border-radius:10px; }
    .test-compact fieldset.card{ padding:10px 12px; }
    .test-compact .controls{ gap:6px; }
    .test-compact [role="radiogroup"] label{ padding:8px 10px; margin:6px 0; border:1px solid #e6e6f0; border-radius:8px; background:#fff; }
    .test-compact [role="radiogroup"] label:hover{ background:#f8f9ff; }
    .test-compact #quiz .card{ margin-top:8px; }
  </style>
</article>

<!-- Logika testu ładowana dynamicznie przez app.js (modules/TEST/test.js) -->