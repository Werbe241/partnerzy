:root{
  --bg1:#6c63ff; --bg2:#6b2bd3; --bg3:#4d2ac7;
  --card:#ffffff; --text:#1a1f36; --muted:#667085;
  --primary:#5d4bff; --primary-2:#7b66ff;
  --border:rgba(255,255,255,.2); --line:#e6e8f0;
  --shadow: 0 10px 30px rgba(23,23,55,.18), 0 4px 14px rgba(23,23,55,.12);
  --radius:16px;
}
html.dark{
  --card:#0f1222; --text:#eef1ff; --muted:#a6b0d4;
  --line:#23283f; --border:rgba(255,255,255,.08);
}
*{box-sizing:border-box}
html,body{height:100%;margin:0}
body.app-bg{
  min-height:100%;
  background: radial-gradient(1200px 600px at -10% -10%, rgba(255,255,255,.18), transparent 60%),
              radial-gradient(1200px 600px at 110% 110%, rgba(255,255,255,.15), transparent 60%),
              linear-gradient(115deg, var(--bg1), var(--bg2) 55%, var(--bg3));
  color:var(--text); font: 16px/1.6 Inter, system-ui, Segoe UI, Roboto, Arial, sans-serif;
}

/* Topbar */
.topbar{
  display:flex; align-items:center; justify-content:space-between;
  padding:14px 22px; color:#fff;
}
.brand{display:flex; align-items:center; gap:12px; color:#fff; font-weight:700}
.brand-logo{height:28px; width:auto; display:block; border-radius:6px}
.brand-title{font-size:16px}
.progress-wrap{display:flex; align-items:center; gap:12px; color:#fff}
.progress-bar{width:360px; height:8px; background:rgba(255,255,255,.25); border-radius:999px; overflow:hidden}
.progress-fill{height:100%; background:#fff; border-radius:999px; transition:width .25s ease}
.progress-label{font-size:13px; opacity:.95}
.top-actions{display:flex; gap:8px}

/* Layout */
.layout{
  display:grid; grid-template-columns: 340px 1fr; gap:24px;
  padding: 16px 22px 28px 22px;
}
.card{
  background:var(--card); border:1px solid var(--line);
  border-radius:var(--radius); box-shadow:var(--shadow);
}
.sidebar{padding:16px 14px; max-height:calc(100vh - 140px); overflow:auto}
.sidebar-head{font-weight:800; letter-spacing:.02em; margin-bottom:8px}
.sidebar-head.small{font-weight:700; font-size:13px; color:var(--muted)}
.sidebar-divider{height:1px; background:var(--line); margin:12px 0}

.modules .module-title{
  padding:10px 12px; border-radius:12px; background:#f5f6ff; color:#2f2a7d; font-weight:700; margin:8px 0 6px;
}
html.dark .modules .module-title{background:#171b36; color:#cfd6ff}
.modules .section{
  display:block; padding:8px 10px; margin:4px 0; border-radius:10px; color:var(--text); text-decoration:none;
  border:1px solid transparent;
}
.modules .section.active,
.modules .section:hover{background:#f1f2fe; border-color:#e0e3ff}
html.dark .modules .section:hover{background:#131733; border-color:#22294b}

.toc a{display:block; color:var(--muted); text-decoration:none; padding:4px 2px; font-size:13px}
.toc .toc-h2{padding-left:4px}
.toc .toc-h3{padding-left:18px}
.toc .toc-h4{padding-left:34px}

/* Content */
.content{padding:18px}
.content-head{
  display:flex; align-items:center; justify-content:space-between; gap:16px; padding:4px 6px 10px 6px; border-bottom:1px solid var(--line);
}
.content-title{font-size:20px; font-weight:800}
.controls{display:flex; gap:8px}
.btn{
  appearance:none; border:1px solid var(--line); border-radius:12px; padding:8px 12px; background:#fff; color:var(--text);
  box-shadow:0 2px 6px rgba(0,0,0,.06); cursor:pointer; transition: all .15s ease;
}
.btn:hover{transform:translateY(-1px)}
.btn.primary{background:linear-gradient(180deg, var(--primary), var(--primary-2)); color:#fff; border-color:transparent}
.btn.ghost{background:rgba(255,255,255,.18); color:#fff; border-color:rgba(255,255,255,.35)}

.md{padding:12px 6px}
.md h1,.md h2,.md h3{margin:22px 0 12px}
.md p{margin:12px 0}
.md ul{padding-left:22px}
.md code,.md pre{background:#f6f7ff; border:1px solid #eceefe; border-radius:8px}
html.dark .md code, html.dark .md pre{background:#121633; border-color:#22264a}
.md pre{padding:10px; overflow:auto}

.pager{display:flex; justify-content:space-between; padding:12px 6px 2px 6px; border-top:1px solid var(--line); margin-top:8px}
.foot{color:#e7e8ff; opacity:.85; padding:10px 22px 22px 22px; font-size:13px}

/* Utilities */
.hidden{display:none}